{"openapi":"3.1.0","info":{"title":"Echobot","description":"AI驱动的数字人动画平台 API","version":"1.0.0"},"paths":{"/api/v1/auth/register":{"post":{"tags":["认证"],"summary":"Register","description":"用户注册\n\n- **email**: 邮箱地址\n- **password**: 密码（至少8位，包含大小写字母和数字）\n- **nickname**: 昵称（2-50个字符）","operationId":"register_api_v1_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/login":{"post":{"tags":["认证"],"summary":"Login","description":"用户登录\n\n- **email**: 邮箱地址\n- **password**: 密码","operationId":"login_api_v1_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/refresh":{"post":{"tags":["认证"],"summary":"Refresh Token","description":"刷新 Token\n\n- **refresh_token**: 刷新令牌","operationId":"refresh_token_api_v1_auth_refresh_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RefreshTokenRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/logout":{"post":{"tags":["认证"],"summary":"Logout","description":"用户登出\n\n清除 Cookie 中的 refresh_token","operationId":"logout_api_v1_auth_logout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/auth/google":{"post":{"tags":["认证"],"summary":"Google Auth","description":"Google 账号登录\n\n- **code**: Google 授权码","operationId":"google_auth_api_v1_auth_google_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GoogleAuthRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/google/url":{"get":{"tags":["认证"],"summary":"Get Google Auth Url","description":"获取 Google 登录 URL\n\n前端重定向到此 URL 进行 Google 授权","operationId":"get_google_auth_url_api_v1_auth_google_url_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/user/profile":{"get":{"tags":["用户"],"summary":"Get Profile","description":"获取当前用户资料","operationId":"get_profile_api_v1_user_profile_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]},"put":{"tags":["用户"],"summary":"Update Profile","description":"更新用户资料","operationId":"update_profile_api_v1_user_profile_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProfileRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/user/avatar":{"post":{"tags":["用户"],"summary":"Upload Avatar","description":"上传头像","operationId":"upload_avatar_api_v1_user_avatar_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_avatar_api_v1_user_avatar_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/user/change-password":{"post":{"tags":["用户"],"summary":"Change Password","description":"修改密码","operationId":"change_password_api_v1_user_change_password_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChangePasswordRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/stories/categories":{"get":{"tags":["故事"],"summary":"List Categories","description":"获取所有分类","operationId":"list_categories_api_v1_stories_categories_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/stories":{"get":{"tags":["故事"],"summary":"List Stories","description":"获取故事列表\n\n- **page**: 页码\n- **page_size**: 每页数量\n- **category_id**: 分类ID（可选）\n- **search**: 搜索关键词（可选）","operationId":"list_stories_api_v1_stories_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Page Size"}},{"name":"category_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category Id"}},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Search"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/stories/random":{"get":{"tags":["故事"],"summary":"Get Random Stories","description":"获取随机故事（用于首页轮播图）","operationId":"get_random_stories_api_v1_stories_random_get","parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":20,"minimum":1,"default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/stories/{story_id}":{"get":{"tags":["故事"],"summary":"Get Story","description":"获取故事详情","operationId":"get_story_api_v1_stories__story_id__get","parameters":[{"name":"story_id","in":"path","required":true,"schema":{"type":"string","title":"Story Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/stories/{story_id}/view":{"post":{"tags":["故事"],"summary":"Record View","description":"记录播放次数","operationId":"record_view_api_v1_stories__story_id__view_post","parameters":[{"name":"story_id","in":"path","required":true,"schema":{"type":"string","title":"Story Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/dashboard":{"get":{"tags":["管理后台"],"summary":"Get Dashboard","description":"获取数据概览","operationId":"get_dashboard_api_v1_admin_dashboard_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/admin/users":{"get":{"tags":["管理后台"],"summary":"List Users","description":"获取用户列表","operationId":"list_users_api_v1_admin_users_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Page Size"}},{"name":"role","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Role"}},{"name":"is_active","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Search"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/users/{user_id}/status":{"put":{"tags":["管理后台"],"summary":"Update User Status","description":"启用/禁用用户","operationId":"update_user_status_api_v1_admin_users__user_id__status_put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}},{"name":"is_active","in":"query","required":true,"schema":{"type":"boolean","title":"Is Active"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/users/{user_id}/role":{"put":{"tags":["管理后台"],"summary":"Update User Role","description":"修改用户角色","operationId":"update_user_role_api_v1_admin_users__user_id__role_put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}},{"name":"role","in":"query","required":true,"schema":{"type":"string","title":"Role"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/users/{user_id}":{"get":{"tags":["管理后台"],"summary":"Get User Detail","description":"获取用户详细信息\n\n包含：基本信息、档案统计、最近活动","operationId":"get_user_detail_api_v1_admin_users__user_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/users/{user_id}/voice-profiles":{"get":{"tags":["管理后台"],"summary":"Get User Voice Profiles","description":"获取用户的所有声音档案","operationId":"get_user_voice_profiles_api_v1_admin_users__user_id__voice_profiles_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}},{"name":"include_deleted","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Deleted"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/users/{user_id}/voice-profiles/{profile_id}":{"delete":{"tags":["管理后台"],"summary":"Delete User Voice Profile","description":"删除用户的声音档案","operationId":"delete_user_voice_profile_api_v1_admin_users__user_id__voice_profiles__profile_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}},{"name":"profile_id","in":"path","required":true,"schema":{"type":"string","title":"Profile Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/users/{user_id}/avatar-profiles":{"get":{"tags":["管理后台"],"summary":"Get User Avatar Profiles","description":"获取用户的所有头像档案","operationId":"get_user_avatar_profiles_api_v1_admin_users__user_id__avatar_profiles_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}},{"name":"include_deleted","in":"query","required":false,"schema":{"type":"boolean","default":false,"title":"Include Deleted"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/users/{user_id}/avatar-profiles/{profile_id}":{"delete":{"tags":["管理后台"],"summary":"Delete User Avatar Profile","description":"删除用户的头像档案","operationId":"delete_user_avatar_profile_api_v1_admin_users__user_id__avatar_profiles__profile_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}},{"name":"profile_id","in":"path","required":true,"schema":{"type":"string","title":"Profile Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/users/{user_id}/story-jobs":{"get":{"tags":["管理后台"],"summary":"Get User Story Jobs","description":"获取用户的故事生成任务记录","operationId":"get_user_story_jobs_api_v1_admin_users__user_id__story_jobs_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Page Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/categories":{"post":{"tags":["管理后台"],"summary":"Create Category","description":"创建分类","operationId":"create_category_api_v1_admin_categories_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/admin/categories/{category_id}":{"put":{"tags":["管理后台"],"summary":"Update Category","description":"更新分类","operationId":"update_category_api_v1_admin_categories__category_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"category_id","in":"path","required":true,"schema":{"type":"string","title":"Category Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["管理后台"],"summary":"Delete Category","description":"删除分类","operationId":"delete_category_api_v1_admin_categories__category_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"category_id","in":"path","required":true,"schema":{"type":"string","title":"Category Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/stories/batch":{"post":{"tags":["管理后台"],"summary":"Batch Create Stories","description":"批量上传视频创建故事\n\n- 支持同时上传多个视频文件\n- 所有视频将被分配到同一分类\n- AI处理最多5个并发执行","operationId":"batch_create_stories_api_v1_admin_stories_batch_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_batch_create_stories_api_v1_admin_stories_batch_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]},"delete":{"tags":["管理后台"],"summary":"Batch Delete Stories","description":"批量删除故事\n\nArgs:\n    story_ids: 要删除的故事ID列表","operationId":"batch_delete_stories_api_v1_admin_stories_batch_delete","requestBody":{"content":{"application/json":{"schema":{"items":{"type":"string"},"type":"array","title":"Story Ids"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/admin/stories/batch/{batch_id}":{"get":{"tags":["管理后台"],"summary":"Get Batch Status","description":"获取批量上传任务状态","operationId":"get_batch_status_api_v1_admin_stories_batch__batch_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"batch_id","in":"path","required":true,"schema":{"type":"string","title":"Batch Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/stories/batch-publish":{"post":{"tags":["管理后台"],"summary":"Batch Publish Stories","description":"批量上架故事\n\nArgs:\n    story_ids: 要上架的故事ID列表","operationId":"batch_publish_stories_api_v1_admin_stories_batch_publish_post","requestBody":{"content":{"application/json":{"schema":{"items":{"type":"string"},"type":"array","title":"Story Ids"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/admin/stories/batch-unpublish":{"post":{"tags":["管理后台"],"summary":"Batch Unpublish Stories","description":"批量下架故事\n\nArgs:\n    story_ids: 要下架的故事ID列表","operationId":"batch_unpublish_stories_api_v1_admin_stories_batch_unpublish_post","requestBody":{"content":{"application/json":{"schema":{"items":{"type":"string"},"type":"array","title":"Story Ids"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/admin/stories":{"get":{"tags":["管理后台"],"summary":"List Stories Admin","description":"获取故事列表（包含未发布的）","operationId":"list_stories_admin_api_v1_admin_stories_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Page Size"}},{"name":"category_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category Id"}},{"name":"is_published","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Published"}},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Search"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["管理后台"],"summary":"Create Story","description":"创建故事 - 支持直接上传视频文件\n\n上传视频后会自动：\n1. 从视频第10秒提取缩略图\n2. 获取视频时长\n3. 提取音频并生成字幕\n4. 使用 AI 生成标题和英文标题","operationId":"create_story_api_v1_admin_stories_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_create_story_api_v1_admin_stories_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/stories/{story_id}":{"get":{"tags":["管理后台"],"summary":"Get Story Detail","description":"获取故事详情（包含字幕）","operationId":"get_story_detail_api_v1_admin_stories__story_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"story_id","in":"path","required":true,"schema":{"type":"string","title":"Story Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["管理后台"],"summary":"Update Story","description":"更新故事（支持更新缩略图和视频）","operationId":"update_story_api_v1_admin_stories__story_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"story_id","in":"path","required":true,"schema":{"type":"string","title":"Story Id"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_update_story_api_v1_admin_stories__story_id__put"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["管理后台"],"summary":"Delete Story","description":"删除故事","operationId":"delete_story_api_v1_admin_stories__story_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"story_id","in":"path","required":true,"schema":{"type":"string","title":"Story Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/stories/{story_id}/publish":{"post":{"tags":["管理后台"],"summary":"Publish Story","description":"发布故事","operationId":"publish_story_api_v1_admin_stories__story_id__publish_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"story_id","in":"path","required":true,"schema":{"type":"string","title":"Story Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/stories/{story_id}/unpublish":{"post":{"tags":["管理后台"],"summary":"Unpublish Story","description":"下架故事","operationId":"unpublish_story_api_v1_admin_stories__story_id__unpublish_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"story_id","in":"path","required":true,"schema":{"type":"string","title":"Story Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/upload/thumbnail":{"post":{"tags":["管理后台"],"summary":"Upload Thumbnail","description":"上传故事缩略图","operationId":"upload_thumbnail_api_v1_admin_upload_thumbnail_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_thumbnail_api_v1_admin_upload_thumbnail_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/admin/upload/video":{"post":{"tags":["管理后台"],"summary":"Upload Video","description":"上传故事视频","operationId":"upload_video_api_v1_admin_upload_video_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_video_api_v1_admin_upload_video_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/admin/audiobook/stories":{"get":{"tags":["管理后台"],"summary":"List Audiobook Stories","description":"获取有声书故事列表（管理端）","operationId":"list_audiobook_stories_api_v1_admin_audiobook_stories_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Page Size"}},{"name":"language","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language"}},{"name":"category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"}},{"name":"is_published","in":"query","required":false,"schema":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Published"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["管理后台"],"summary":"Create Audiobook Story","description":"创建有声书故事","operationId":"create_audiobook_story_api_v1_admin_audiobook_stories_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_create_audiobook_story_api_v1_admin_audiobook_stories_post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/audiobook/stories/{story_id}":{"get":{"tags":["管理后台"],"summary":"Get Audiobook Story","description":"获取有声书故事详情","operationId":"get_audiobook_story_api_v1_admin_audiobook_stories__story_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"story_id","in":"path","required":true,"schema":{"type":"string","title":"Story Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["管理后台"],"summary":"Update Audiobook Story","description":"更新有声书故事","operationId":"update_audiobook_story_api_v1_admin_audiobook_stories__story_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"story_id","in":"path","required":true,"schema":{"type":"string","title":"Story Id"}}],"requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_update_audiobook_story_api_v1_admin_audiobook_stories__story_id__put"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["管理后台"],"summary":"Delete Audiobook Story","description":"删除有声书故事","operationId":"delete_audiobook_story_api_v1_admin_audiobook_stories__story_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"story_id","in":"path","required":true,"schema":{"type":"string","title":"Story Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/audiobook/jobs":{"get":{"tags":["管理后台"],"summary":"List Audiobook Jobs","description":"获取有声书生成任务列表（管理端）","operationId":"list_audiobook_jobs_api_v1_admin_audiobook_jobs_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Page Size"}},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"}},{"name":"user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/voice-clone/preset-stories":{"get":{"tags":["Voice Clone"],"summary":"Get Preset Stories","description":"获取预设故事列表\n\n返回 5 个预设的英文故事，每个故事约 15 秒朗读时长","operationId":"get_preset_stories_api_v1_voice_clone_preset_stories_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/voice-clone/preview":{"post":{"tags":["Voice Clone"],"summary":"Create Voice Clone Preview","description":"创建语音克隆预览任务\n\n上传参考音频并选择预设故事，后台生成克隆语音预览。\n返回任务ID，前端轮询 GET /preview/{task_id} 获取状态。\n\n- **audio**: 参考音频文件 (10-15秒清晰语音, WAV/MP3格式)\n- **story_id**: 预设故事ID (从 /preset-stories 获取)","operationId":"create_voice_clone_preview_api_v1_voice_clone_preview_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_create_voice_clone_preview_api_v1_voice_clone_preview_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/voice-clone/preview/{task_id}":{"get":{"tags":["Voice Clone"],"summary":"Get Voice Clone Status","description":"获取语音克隆任务状态\n\n轮询此接口获取任务进度和结果。\n\n- **task_id**: 任务ID (从 POST /preview 返回)\n\n返回:\n- status: processing / completed / failed\n- progress: 0-100 进度百分比\n- audio_url: 完成后的音频URL (completed 状态时返回)\n- error: 错误信息 (failed 状态时返回)","operationId":"get_voice_clone_status_api_v1_voice_clone_preview__task_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string","title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/voice-clone/profiles":{"get":{"tags":["Voice Clone"],"summary":"Get Voice Profiles","description":"获取用户的所有声音档案\n\n返回用户保存的所有声音档案列表。","operationId":"get_voice_profiles_api_v1_voice_clone_profiles_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["Voice Clone"],"summary":"Save Voice Profile","description":"保存声音档案\n\n在语音克隆预览完成后，保存该声音到用户的声音库中。\n\n- **task_id**: 已完成的语音克隆任务ID\n- **name**: 声音名称（如：爸爸的声音、妈妈的声音）","operationId":"save_voice_profile_api_v1_voice_clone_profiles_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SaveVoiceProfileRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/voice-clone/profiles/{profile_id}":{"get":{"tags":["Voice Clone"],"summary":"Get Voice Profile","description":"获取单个声音档案详情","operationId":"get_voice_profile_api_v1_voice_clone_profiles__profile_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"profile_id","in":"path","required":true,"schema":{"type":"string","title":"Profile Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Voice Clone"],"summary":"Update Voice Profile","description":"更新声音档案名称","operationId":"update_voice_profile_api_v1_voice_clone_profiles__profile_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"profile_id","in":"path","required":true,"schema":{"type":"string","title":"Profile Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateVoiceProfileRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Voice Clone"],"summary":"Delete Voice Profile","description":"删除声音档案","operationId":"delete_voice_profile_api_v1_voice_clone_profiles__profile_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"profile_id","in":"path","required":true,"schema":{"type":"string","title":"Profile Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/digital-human/preview":{"post":{"tags":["Digital Human"],"summary":"Create Digital Human Preview","description":"创建数字人预览任务\n\n上传一张清晰的正面人像照片，后台生成动态数字人预览视频。\n返回任务ID，前端轮询 GET /preview/{task_id} 获取状态。\n\n音频来源（三选一）:\n1. 不传音频参数 - 使用系统默认音色生成预览\n2. 上传 audio 文件 - 直接使用上传的音频\n3. 传 voice_profile_id + preview_text - 使用已保存的克隆声音合成音频\n\n- **image**: 头像照片 (清晰正面人像, JPG/PNG格式)\n- **audio**: 音频文件 (可选, WAV/MP3格式)\n- **voice_profile_id**: 声音档案ID (可选)\n- **preview_text**: 预览文本 (使用声音档案时需要)","operationId":"create_digital_human_preview_api_v1_digital_human_preview_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_create_digital_human_preview_api_v1_digital_human_preview_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/digital-human/preview/{task_id}":{"get":{"tags":["Digital Human"],"summary":"Get Digital Human Status","description":"获取数字人任务状态\n\n轮询此接口获取任务进度和结果。\n\n- **task_id**: 任务ID (从 POST /preview 返回)\n\n返回:\n- status: detecting / generating / completed / failed\n- progress: 0-100 进度百分比\n- video_url: 完成后的视频URL (completed 状态时返回)\n- error: 错误信息 (failed 状态时返回)","operationId":"get_digital_human_status_api_v1_digital_human_preview__task_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string","title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/digital-human/profiles":{"get":{"tags":["Digital Human"],"summary":"Get Avatar Profiles","description":"获取用户的所有头像档案\n\n返回用户保存的所有头像档案列表。","operationId":"get_avatar_profiles_api_v1_digital_human_profiles_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["Digital Human"],"summary":"Save Avatar Profile","description":"保存头像档案\n\n在数字人预览完成后，保存该头像到用户的头像库中。\n\n- **task_id**: 已完成的数字人任务ID\n- **name**: 头像名称（如：爸爸的头像、妈妈的头像）","operationId":"save_avatar_profile_api_v1_digital_human_profiles_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SaveAvatarProfileRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/api/v1/digital-human/profiles/{profile_id}":{"get":{"tags":["Digital Human"],"summary":"Get Avatar Profile","description":"获取单个头像档案详情","operationId":"get_avatar_profile_api_v1_digital_human_profiles__profile_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"profile_id","in":"path","required":true,"schema":{"type":"string","title":"Profile Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Digital Human"],"summary":"Update Avatar Profile","description":"更新头像档案名称","operationId":"update_avatar_profile_api_v1_digital_human_profiles__profile_id__put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"profile_id","in":"path","required":true,"schema":{"type":"string","title":"Profile Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateAvatarProfileRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Digital Human"],"summary":"Delete Avatar Profile","description":"删除头像档案","operationId":"delete_avatar_profile_api_v1_digital_human_profiles__profile_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"profile_id","in":"path","required":true,"schema":{"type":"string","title":"Profile Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/story-generation/jobs":{"post":{"tags":["story-generation"],"summary":"创建故事生成任务","description":"创建故事生成任务\n\n流程：\n1. 提取视频音频\n2. 分离人声/背景音\n3. 语音识别生成字幕\n4. 生成克隆语音\n5. 生成数字人视频\n6. 合成最终视频\n\n参数：\n- full_video: 默认 False 只生成前2个片段预览，设为 True 生成完整视频","operationId":"create_job_api_v1_story_generation_jobs_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateStoryJobRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["story-generation"],"summary":"获取任务列表","description":"获取用户的故事生成任务列表","operationId":"list_jobs_api_v1_story_generation_jobs_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","default":1,"title":"Page"}},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","default":20,"title":"Page Size"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/story-generation/jobs/{job_id}":{"get":{"tags":["story-generation"],"summary":"获取任务详情","description":"获取任务详情和进度","operationId":"get_job_api_v1_story_generation_jobs__job_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/story-generation/jobs/{job_id}/subtitles":{"get":{"tags":["story-generation"],"summary":"获取字幕列表","description":"获取任务的字幕列表，用于角色选择","operationId":"get_subtitles_api_v1_story_generation_jobs__job_id__subtitles_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["story-generation"],"summary":"更新字幕选择","description":"更新字幕选择（选择要扮演的角色台词）","operationId":"update_subtitle_selection_api_v1_story_generation_jobs__job_id__subtitles_put","security":[{"HTTPBearer":[]}],"parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSubtitleSelectionRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/audiobook/stories":{"get":{"tags":["Audiobook"],"summary":"List Stories","description":"获取有声书故事列表\n\n只返回已发布的故事，支持按语言、分类、年龄段筛选。","operationId":"list_stories_api_v1_audiobook_stories_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"页码","default":1,"title":"Page"},"description":"页码"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"每页数量","default":20,"title":"Page Size"},"description":"每页数量"},{"name":"language","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"语言过滤: en | zh","title":"Language"},"description":"语言过滤: en | zh"},{"name":"category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"分类过滤","title":"Category"},"description":"分类过滤"},{"name":"age_group","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"年龄段过滤","title":"Age Group"},"description":"年龄段过滤"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/audiobook/stories/{story_id}":{"get":{"tags":["Audiobook"],"summary":"Get Story","description":"获取故事详情\n\n返回故事的完整内容。","operationId":"get_story_api_v1_audiobook_stories__story_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"story_id","in":"path","required":true,"schema":{"type":"string","title":"Story Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/audiobook/jobs":{"post":{"tags":["Audiobook"],"summary":"Create Job","description":"创建有声书生成任务\n\n选择故事和声音档案，后台生成克隆语音版本的有声书。\n返回任务ID，前端轮询 GET /jobs/{job_id} 获取状态。\n\n- **story_id**: 故事ID\n- **voice_profile_id**: 声音档案ID","operationId":"create_job_api_v1_audiobook_jobs_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateAudiobookJobRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Audiobook"],"summary":"List Jobs","description":"获取用户的有声书生成任务列表\n\n返回当前用户的所有任务，按创建时间倒序。","operationId":"list_jobs_api_v1_audiobook_jobs_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"页码","default":1,"title":"Page"},"description":"页码"},{"name":"page_size","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"每页数量","default":20,"title":"Page Size"},"description":"每页数量"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/audiobook/jobs/{job_id}":{"get":{"tags":["Audiobook"],"summary":"Get Job","description":"获取任务详情\n\n轮询此接口获取任务进度和结果。\n\n返回:\n- status: pending | processing | completed | failed\n- progress: 0-100 进度百分比\n- audio_url: 完成后的音频URL (completed 状态时返回)\n- error: 错误信息 (failed 状态时返回)","operationId":"get_job_api_v1_audiobook_jobs__job_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","description":"根路径","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/health":{"get":{"summary":"Health Check","description":"健康检查","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_batch_create_stories_api_v1_admin_stories_batch_post":{"properties":{"videos":{"items":{"type":"string","format":"binary"},"type":"array","title":"Videos"},"category_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category Id"}},"type":"object","required":["videos"],"title":"Body_batch_create_stories_api_v1_admin_stories_batch_post"},"Body_create_audiobook_story_api_v1_admin_audiobook_stories_post":{"properties":{"title":{"type":"string","title":"Title"},"title_en":{"type":"string","title":"Title En"},"content":{"type":"string","title":"Content"},"language":{"type":"string","title":"Language","default":"en"},"category":{"type":"string","title":"Category","default":"fairy_tale"},"age_group":{"type":"string","title":"Age Group","default":"5-8"},"thumbnail_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Thumbnail Url"},"background_music_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Background Music Url"},"is_published":{"type":"boolean","title":"Is Published","default":true},"sort_order":{"type":"integer","title":"Sort Order","default":0}},"type":"object","required":["title","title_en","content"],"title":"Body_create_audiobook_story_api_v1_admin_audiobook_stories_post"},"Body_create_digital_human_preview_api_v1_digital_human_preview_post":{"properties":{"image":{"type":"string","format":"binary","title":"Image","description":"头像照片 (清晰正面人像, JPG/PNG)"},"audio":{"anyOf":[{"type":"string","format":"binary"},{"type":"null"}],"title":"Audio","description":"音频文件 (可选，用于数字人说话)"},"voice_profile_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Voice Profile Id","description":"已保存的声音档案ID (可选)"},"preview_text":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Preview Text","description":"预览文本，使用声音档案时需要提供"}},"type":"object","required":["image"],"title":"Body_create_digital_human_preview_api_v1_digital_human_preview_post"},"Body_create_story_api_v1_admin_stories_post":{"properties":{"video":{"type":"string","format":"binary","title":"Video"},"category_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category Id"},"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"api_key":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Api Key"}},"type":"object","required":["video"],"title":"Body_create_story_api_v1_admin_stories_post"},"Body_create_voice_clone_preview_api_v1_voice_clone_preview_post":{"properties":{"audio":{"type":"string","format":"binary","title":"Audio","description":"参考音频文件 (10-15秒, WAV/MP3)"},"story_id":{"type":"string","title":"Story Id","description":"预设故事ID"}},"type":"object","required":["audio","story_id"],"title":"Body_create_voice_clone_preview_api_v1_voice_clone_preview_post"},"Body_update_audiobook_story_api_v1_admin_audiobook_stories__story_id__put":{"properties":{"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"title_en":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title En"},"content":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Content"},"language":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Language"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"age_group":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Age Group"},"thumbnail_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Thumbnail Url"},"background_music_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Background Music Url"},"is_published":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Published"},"sort_order":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Sort Order"}},"type":"object","title":"Body_update_audiobook_story_api_v1_admin_audiobook_stories__story_id__put"},"Body_update_story_api_v1_admin_stories__story_id__put":{"properties":{"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"category_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category Id"},"status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Status"},"thumbnail":{"anyOf":[{"type":"string","format":"binary"},{"type":"null"}],"title":"Thumbnail"},"video":{"anyOf":[{"type":"string","format":"binary"},{"type":"null"}],"title":"Video"}},"type":"object","title":"Body_update_story_api_v1_admin_stories__story_id__put"},"Body_upload_avatar_api_v1_user_avatar_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_avatar_api_v1_user_avatar_post"},"Body_upload_thumbnail_api_v1_admin_upload_thumbnail_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_thumbnail_api_v1_admin_upload_thumbnail_post"},"Body_upload_video_api_v1_admin_upload_video_post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_video_api_v1_admin_upload_video_post"},"CategoryCreate":{"properties":{"name":{"type":"string","maxLength":50,"minLength":1,"title":"Name"},"name_en":{"type":"string","maxLength":50,"minLength":1,"title":"Name En"},"sort_order":{"type":"integer","minimum":0.0,"title":"Sort Order","default":0}},"type":"object","required":["name","name_en"],"title":"CategoryCreate","description":"创建分类请求"},"ChangePasswordRequest":{"properties":{"old_password":{"type":"string","minLength":1,"title":"Old Password"},"new_password":{"type":"string","maxLength":128,"minLength":8,"title":"New Password"}},"type":"object","required":["old_password","new_password"],"title":"ChangePasswordRequest","description":"修改密码请求"},"CreateAudiobookJobRequest":{"properties":{"story_id":{"type":"string","title":"Story Id","description":"故事 ID"},"voice_profile_id":{"type":"string","title":"Voice Profile Id","description":"声音档案 ID"}},"type":"object","required":["story_id","voice_profile_id"],"title":"CreateAudiobookJobRequest","description":"创建有声书生成任务请求"},"CreateStoryJobRequest":{"properties":{"story_id":{"type":"string","title":"Story Id","description":"故事 ID"},"voice_profile_id":{"type":"string","title":"Voice Profile Id","description":"声音档案 ID"},"avatar_profile_id":{"type":"string","title":"Avatar Profile Id","description":"头像档案 ID"},"replace_all_voice":{"type":"boolean","title":"Replace All Voice","description":"是否替换全部人声","default":true},"full_video":{"type":"boolean","title":"Full Video","description":"是否生成完整视频，默认只生成前2个片段","default":false}},"type":"object","required":["story_id","voice_profile_id","avatar_profile_id"],"title":"CreateStoryJobRequest","description":"创建故事生成任务请求"},"GoogleAuthRequest":{"properties":{"code":{"type":"string","title":"Code"}},"type":"object","required":["code"],"title":"GoogleAuthRequest","description":"Google 认证请求"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LoginRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","maxLength":128,"minLength":1,"title":"Password"}},"type":"object","required":["email","password"],"title":"LoginRequest","description":"登录请求"},"RefreshTokenRequest":{"properties":{"refresh_token":{"type":"string","title":"Refresh Token"}},"type":"object","required":["refresh_token"],"title":"RefreshTokenRequest","description":"刷新 Token 请求"},"RegisterRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","maxLength":128,"minLength":8,"title":"Password"},"nickname":{"type":"string","maxLength":50,"minLength":2,"title":"Nickname"}},"type":"object","required":["email","password","nickname"],"title":"RegisterRequest","description":"注册请求"},"SaveAvatarProfileRequest":{"properties":{"task_id":{"type":"string","title":"Task Id","description":"数字人预览任务ID"},"name":{"type":"string","maxLength":50,"minLength":1,"title":"Name","description":"头像名称，如：爸爸的头像"}},"type":"object","required":["task_id","name"],"title":"SaveAvatarProfileRequest","description":"保存头像档案请求"},"SaveVoiceProfileRequest":{"properties":{"task_id":{"type":"string","title":"Task Id","description":"语音克隆任务ID"},"name":{"type":"string","maxLength":50,"minLength":1,"title":"Name","description":"声音名称，如：爸爸的声音"}},"type":"object","required":["task_id","name"],"title":"SaveVoiceProfileRequest","description":"保存声音档案请求"},"UpdateAvatarProfileRequest":{"properties":{"name":{"type":"string","maxLength":50,"minLength":1,"title":"Name","description":"头像名称"}},"type":"object","required":["name"],"title":"UpdateAvatarProfileRequest","description":"更新头像档案请求"},"UpdateProfileRequest":{"properties":{"nickname":{"anyOf":[{"type":"string","maxLength":50,"minLength":2},{"type":"null"}],"title":"Nickname"}},"type":"object","title":"UpdateProfileRequest","description":"更新资料请求"},"UpdateSubtitleSelectionRequest":{"properties":{"selected_indices":{"items":{"type":"integer"},"type":"array","title":"Selected Indices","description":"选中的字幕序号列表"}},"type":"object","required":["selected_indices"],"title":"UpdateSubtitleSelectionRequest","description":"更新字幕选择（选择要扮演的角色）"},"UpdateVoiceProfileRequest":{"properties":{"name":{"type":"string","maxLength":50,"minLength":1,"title":"Name","description":"声音名称"}},"type":"object","required":["name"],"title":"UpdateVoiceProfileRequest","description":"更新声音档案请求"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}