{
  "openapi": "3.1.0",
  "info": {
    "title": "Echobot",
    "description": "AI驱动的数字人动画平台 API",
    "version": "1.0.0"
  },
  "paths": {
    "/api/v1/auth/register": {
      "post": {
        "tags": [
          "认证"
        ],
        "summary": "Register",
        "description": "用户注册\n\n- **email**: 邮箱地址\n- **password**: 密码（至少8位，包含大小写字母和数字）\n- **nickname**: 昵称（2-50个字符）",
        "operationId": "register_api_v1_auth_register_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "tags": [
          "认证"
        ],
        "summary": "Login",
        "description": "用户登录\n\n- **email**: 邮箱地址\n- **password**: 密码",
        "operationId": "login_api_v1_auth_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/refresh": {
      "post": {
        "tags": [
          "认证"
        ],
        "summary": "Refresh Token",
        "description": "刷新 Token\n\n- **refresh_token**: 刷新令牌",
        "operationId": "refresh_token_api_v1_auth_refresh_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshTokenRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/logout": {
      "post": {
        "tags": [
          "认证"
        ],
        "summary": "Logout",
        "description": "用户登出\n\n清除 Cookie 中的 refresh_token",
        "operationId": "logout_api_v1_auth_logout_post",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/auth/google": {
      "post": {
        "tags": [
          "认证"
        ],
        "summary": "Google Auth",
        "description": "Google 账号登录\n\n- **code**: Google 授权码",
        "operationId": "google_auth_api_v1_auth_google_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GoogleAuthRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/google/url": {
      "get": {
        "tags": [
          "认证"
        ],
        "summary": "Get Google Auth Url",
        "description": "获取 Google 登录 URL\n\n前端重定向到此 URL 进行 Google 授权",
        "operationId": "get_google_auth_url_api_v1_auth_google_url_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/user/profile": {
      "get": {
        "tags": [
          "用户"
        ],
        "summary": "获取用户资料",
        "description": "获取当前登录用户的个人资料\n\n返回用户的基本信息、订阅状态等。\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"id\": \"6948bda91fd873cf81f5addd\",\n        \"email\": \"user@example.com\",\n        \"nickname\": \"小明\",\n        \"avatar_url\": \"https://example.com/avatar.jpg\",\n        \"role\": \"user\",\n        \"subscription\": {\"plan\": \"free\", \"expires_at\": null},\n        \"is_active\": true,\n        \"created_at\": \"2025-01-01T12:00:00\"\n    }\n}\n```",
        "operationId": "get_profile_api_v1_user_profile_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "put": {
        "tags": [
          "用户"
        ],
        "summary": "更新用户资料",
        "description": "更新当前用户的个人资料\n\n可更新的字段：\n- **nickname**: 用户昵称\n\n**请求示例:**\n```json\n{\n    \"nickname\": \"新昵称\"\n}\n```",
        "operationId": "update_profile_api_v1_user_profile_put",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateProfileRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/user/avatar": {
      "post": {
        "tags": [
          "用户"
        ],
        "summary": "上传头像",
        "description": "上传用户头像\n\n**支持的图片格式:** JPG, PNG, GIF, WebP\n\n**文件大小限制:** 最大 5MB\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"id\": \"6948bda91fd873cf81f5addd\",\n        \"avatar_url\": \"/uploads/avatars/user123/avatar_20250101.jpg\",\n        ...\n    }\n}\n```",
        "operationId": "upload_avatar_api_v1_user_avatar_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_upload_avatar_api_v1_user_avatar_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/user/change-password": {
      "post": {
        "tags": [
          "用户"
        ],
        "summary": "修改密码",
        "description": "修改当前用户的登录密码\n\n需要提供当前密码进行验证，新密码必须满足以下要求：\n- 长度至少8位\n- 包含至少一个大写字母\n- 包含至少一个小写字母\n- 包含至少一个数字\n\n**请求示例:**\n```json\n{\n    \"old_password\": \"OldPassword123\",\n    \"new_password\": \"NewPassword456\"\n}\n```\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"密码修改成功\",\n    \"data\": null\n}\n```",
        "operationId": "change_password_api_v1_user_change_password_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChangePasswordRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/stories/categories": {
      "get": {
        "tags": [
          "故事"
        ],
        "summary": "获取故事分类列表",
        "description": "获取所有故事分类\n\n返回平台上所有可用的故事分类，按排序字段排列。\n用于前端分类筛选和导航。\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": [\n        {\n            \"id\": \"694534f1c32ffbd6151c18a1\",\n            \"name\": \"童话故事\",\n            \"name_en\": \"Fairy Tales\",\n            \"sort_order\": 0,\n            \"story_count\": 15\n        }\n    ]\n}\n```",
        "operationId": "list_categories_api_v1_stories_categories_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/stories": {
      "get": {
        "tags": [
          "故事"
        ],
        "summary": "获取故事列表",
        "description": "获取已发布的故事列表\n\n支持分页、分类筛选和关键词搜索。\n普通用户只能查看已发布状态的故事。\n\n**请求参数:**\n- **page**: 页码，从1开始\n- **page_size**: 每页数量，1-100\n- **category_id**: 分类ID（可选），筛选特定分类下的故事\n- **search**: 搜索关键词（可选），匹配故事标题\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"items\": [\n            {\n                \"id\": \"694534f1c32ffbd6151c18a2\",\n                \"title\": \"三只小猪\",\n                \"title_en\": \"The Three Little Pigs\",\n                \"category_id\": \"694534f1c32ffbd6151c18a1\",\n                \"thumbnail_url\": \"/uploads/thumbnails/story123.jpg\",\n                \"duration\": 180,\n                \"is_published\": true,\n                \"view_count\": 1234,\n                \"created_at\": \"2025-01-01T12:00:00\"\n            }\n        ],\n        \"total\": 50,\n        \"page\": 1,\n        \"page_size\": 20\n    }\n}\n```",
        "operationId": "list_stories_api_v1_stories_get",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "页码，从1开始",
              "default": 1,
              "title": "Page"
            },
            "description": "页码，从1开始"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "每页数量，最大100",
              "default": 20,
              "title": "Page Size"
            },
            "description": "每页数量，最大100"
          },
          {
            "name": "category_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "分类ID，用于筛选特定分类",
              "title": "Category Id"
            },
            "description": "分类ID，用于筛选特定分类"
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "搜索关键词，匹配标题",
              "title": "Search"
            },
            "description": "搜索关键词，匹配标题"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/stories/random": {
      "get": {
        "tags": [
          "故事"
        ],
        "summary": "获取随机故事",
        "description": "获取随机故事列表\n\n随机返回指定数量的已发布故事，用于首页轮播图和推荐展示。\n\n**请求参数:**\n- **limit**: 返回数量，1-20，默认10\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": [\n        {\n            \"id\": \"694534f1c32ffbd6151c18a2\",\n            \"title\": \"三只小猪\",\n            \"thumbnail_url\": \"/uploads/thumbnails/story123.jpg\",\n            \"duration\": 180\n        }\n    ]\n}\n```",
        "operationId": "get_random_stories_api_v1_stories_random_get",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 20,
              "minimum": 1,
              "description": "返回数量，最大20",
              "default": 10,
              "title": "Limit"
            },
            "description": "返回数量，最大20"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/stories/{story_id}": {
      "get": {
        "tags": [
          "故事"
        ],
        "summary": "获取故事详情",
        "description": "获取单个故事的完整详情\n\n返回故事的所有信息，包括视频URL、字幕数据等。\n\n**路径参数:**\n- **story_id**: 故事唯一标识ID\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"id\": \"694534f1c32ffbd6151c18a2\",\n        \"title\": \"三只小猪\",\n        \"title_en\": \"The Three Little Pigs\",\n        \"category_id\": \"694534f1c32ffbd6151c18a1\",\n        \"category_name\": \"童话故事\",\n        \"description\": \"三只小猪建房子的经典童话故事\",\n        \"thumbnail_url\": \"/uploads/thumbnails/story123.jpg\",\n        \"video_url\": \"/uploads/videos/story123.mp4\",\n        \"audio_url\": \"/uploads/audio/story123.mp3\",\n        \"duration\": 180,\n        \"is_published\": true,\n        \"view_count\": 1234,\n        \"subtitles\": [\n            {\"start\": 0.0, \"end\": 3.5, \"text\": \"从前有三只小猪...\"}\n        ],\n        \"created_at\": \"2025-01-01T12:00:00\",\n        \"updated_at\": \"2025-01-01T12:00:00\"\n    }\n}\n```",
        "operationId": "get_story_api_v1_stories__story_id__get",
        "parameters": [
          {
            "name": "story_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Story Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/stories/{story_id}/view": {
      "post": {
        "tags": [
          "故事"
        ],
        "summary": "记录播放次数",
        "description": "记录故事播放次数\n\n每次用户观看故事时调用此接口，用于统计播放量。\n\n**路径参数:**\n- **story_id**: 故事唯一标识ID\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"播放记录成功\",\n    \"data\": null\n}\n```",
        "operationId": "record_view_api_v1_stories__story_id__view_post",
        "parameters": [
          {
            "name": "story_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Story Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/dashboard": {
      "get": {
        "tags": [
          "管理后台"
        ],
        "summary": "获取数据概览",
        "description": "获取管理后台数据概览\n\n返回平台核心统计数据，包括用户、故事、订阅等信息。\n用于管理后台首页展示。\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"total_users\": 1500,\n        \"total_stories\": 120,\n        \"published_stories\": 100,\n        \"active_subscribers\": 50,\n        \"monthly_revenue\": 0,\n        \"recent_users\": [...],\n        \"recent_stories\": [...]\n    }\n}\n```",
        "operationId": "get_dashboard_api_v1_admin_dashboard_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/admin/users": {
      "get": {
        "tags": [
          "管理后台"
        ],
        "summary": "获取用户列表",
        "description": "获取用户列表\n\n支持分页、角色筛选、状态筛选和关键词搜索。\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"items\": [\n            {\n                \"id\": \"6948bda91fd873cf81f5addd\",\n                \"email\": \"user@example.com\",\n                \"nickname\": \"小明\",\n                \"role\": \"user\",\n                \"subscription_plan\": \"free\",\n                \"is_active\": true,\n                \"created_at\": \"2025-01-01T12:00:00\"\n            }\n        ],\n        \"total\": 100,\n        \"page\": 1,\n        \"page_size\": 20\n    }\n}\n```",
        "operationId": "list_users_api_v1_admin_users_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "页码，从1开始",
              "default": 1,
              "title": "Page"
            },
            "description": "页码，从1开始"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "每页数量，最大100",
              "default": 20,
              "title": "Page Size"
            },
            "description": "每页数量，最大100"
          },
          {
            "name": "role",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "角色筛选：user | subscriber | admin",
              "title": "Role"
            },
            "description": "角色筛选：user | subscriber | admin"
          },
          {
            "name": "is_active",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "description": "是否激活筛选",
              "title": "Is Active"
            },
            "description": "是否激活筛选"
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "搜索关键词，匹配邮箱或昵称",
              "title": "Search"
            },
            "description": "搜索关键词，匹配邮箱或昵称"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/users/{user_id}/status": {
      "put": {
        "tags": [
          "管理后台"
        ],
        "summary": "启用/禁用用户",
        "description": "启用或禁用用户账号\n\n**路径参数:**\n- **user_id**: 用户ID\n\n**查询参数:**\n- **is_active**: true=启用, false=禁用",
        "operationId": "update_user_status_api_v1_admin_users__user_id__status_put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          },
          {
            "name": "is_active",
            "in": "query",
            "required": true,
            "schema": {
              "type": "boolean",
              "title": "Is Active"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/users/{user_id}/role": {
      "put": {
        "tags": [
          "管理后台"
        ],
        "summary": "修改用户角色",
        "description": "修改用户角色\n\n**路径参数:**\n- **user_id**: 用户ID\n\n**查询参数:**\n- **role**: 新角色，可选值：user | subscriber | admin",
        "operationId": "update_user_role_api_v1_admin_users__user_id__role_put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          },
          {
            "name": "role",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Role"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/users/{user_id}": {
      "get": {
        "tags": [
          "管理后台"
        ],
        "summary": "获取用户详细信息",
        "description": "获取用户详细信息\n\n返回用户的完整信息，包括基本资料、档案统计和最近活动。\n\n**路径参数:**\n- **user_id**: 用户ID\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"id\": \"6948bda91fd873cf81f5addd\",\n        \"email\": \"user@example.com\",\n        \"nickname\": \"小明\",\n        \"role\": \"user\",\n        \"subscription\": {\"plan\": \"free\"},\n        \"is_active\": true,\n        \"stats\": {\n            \"voice_profiles\": 2,\n            \"avatar_profiles\": 1,\n            \"story_jobs\": 5\n        }\n    }\n}\n```",
        "operationId": "get_user_detail_api_v1_admin_users__user_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/users/{user_id}/voice-profiles": {
      "get": {
        "tags": [
          "管理后台"
        ],
        "summary": "获取用户声音档案",
        "description": "获取指定用户的所有声音档案",
        "operationId": "get_user_voice_profiles_api_v1_admin_users__user_id__voice_profiles_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          },
          {
            "name": "include_deleted",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "是否包含已删除的档案",
              "default": false,
              "title": "Include Deleted"
            },
            "description": "是否包含已删除的档案"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/users/{user_id}/voice-profiles/{profile_id}": {
      "delete": {
        "tags": [
          "管理后台"
        ],
        "summary": "删除用户声音档案",
        "description": "管理员删除指定用户的声音档案",
        "operationId": "delete_user_voice_profile_api_v1_admin_users__user_id__voice_profiles__profile_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          },
          {
            "name": "profile_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Profile Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/users/{user_id}/avatar-profiles": {
      "get": {
        "tags": [
          "管理后台"
        ],
        "summary": "获取用户头像档案",
        "description": "获取指定用户的所有头像档案",
        "operationId": "get_user_avatar_profiles_api_v1_admin_users__user_id__avatar_profiles_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          },
          {
            "name": "include_deleted",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "是否包含已删除的档案",
              "default": false,
              "title": "Include Deleted"
            },
            "description": "是否包含已删除的档案"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/users/{user_id}/avatar-profiles/{profile_id}": {
      "delete": {
        "tags": [
          "管理后台"
        ],
        "summary": "删除用户头像档案",
        "description": "删除用户的头像档案",
        "operationId": "delete_user_avatar_profile_api_v1_admin_users__user_id__avatar_profiles__profile_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          },
          {
            "name": "profile_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Profile Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/users/{user_id}/story-jobs": {
      "get": {
        "tags": [
          "管理后台"
        ],
        "summary": "获取用户故事生成任务",
        "description": "获取用户的故事生成任务记录",
        "operationId": "get_user_story_jobs_api_v1_admin_users__user_id__story_jobs_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "User Id"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 20,
              "title": "Page Size"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/categories": {
      "post": {
        "tags": [
          "管理后台"
        ],
        "summary": "创建故事分类",
        "description": "创建分类",
        "operationId": "create_category_api_v1_admin_categories_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CategoryCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/admin/categories/{category_id}": {
      "put": {
        "tags": [
          "管理后台"
        ],
        "summary": "更新故事分类",
        "description": "更新分类",
        "operationId": "update_category_api_v1_admin_categories__category_id__put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "category_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Category Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CategoryCreate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "管理后台"
        ],
        "summary": "删除故事分类",
        "description": "删除分类",
        "operationId": "delete_category_api_v1_admin_categories__category_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "category_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Category Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/stories/batch": {
      "post": {
        "tags": [
          "管理后台"
        ],
        "summary": "批量上传视频创建故事",
        "description": "批量上传视频创建故事\n\n- 支持同时上传多个视频文件\n- 所有视频将被分配到同一分类\n- AI处理最多5个并发执行",
        "operationId": "batch_create_stories_api_v1_admin_stories_batch_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_batch_create_stories_api_v1_admin_stories_batch_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "管理后台"
        ],
        "summary": "批量删除故事",
        "description": "批量删除故事\n\nArgs:\n    story_ids: 要删除的故事ID列表",
        "operationId": "batch_delete_stories_api_v1_admin_stories_batch_delete",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "items": {
                  "type": "string"
                },
                "type": "array",
                "title": "Story Ids"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/admin/stories/batch/{batch_id}": {
      "get": {
        "tags": [
          "管理后台"
        ],
        "summary": "获取批量上传任务状态",
        "description": "获取批量上传任务状态",
        "operationId": "get_batch_status_api_v1_admin_stories_batch__batch_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "batch_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Batch Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/stories/batch-publish": {
      "post": {
        "tags": [
          "管理后台"
        ],
        "summary": "批量上架故事",
        "description": "批量上架故事\n\nArgs:\n    story_ids: 要上架的故事ID列表",
        "operationId": "batch_publish_stories_api_v1_admin_stories_batch_publish_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "items": {
                  "type": "string"
                },
                "type": "array",
                "title": "Story Ids"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/admin/stories/batch-unpublish": {
      "post": {
        "tags": [
          "管理后台"
        ],
        "summary": "批量下架故事",
        "description": "批量下架故事\n\nArgs:\n    story_ids: 要下架的故事ID列表",
        "operationId": "batch_unpublish_stories_api_v1_admin_stories_batch_unpublish_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "items": {
                  "type": "string"
                },
                "type": "array",
                "title": "Story Ids"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/admin/stories": {
      "get": {
        "tags": [
          "管理后台"
        ],
        "summary": "获取故事列表（管理端）",
        "description": "获取故事列表（包含未发布的）",
        "operationId": "list_stories_admin_api_v1_admin_stories_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 20,
              "title": "Page Size"
            }
          },
          {
            "name": "category_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Category Id"
            }
          },
          {
            "name": "is_published",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Is Published"
            }
          },
          {
            "name": "search",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Search"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "管理后台"
        ],
        "summary": "上传视频创建故事",
        "description": "创建故事 - 支持直接上传视频文件\n\n上传视频后会自动：\n1. 从视频第10秒提取缩略图\n2. 获取视频时长\n3. 提取音频并生成字幕\n4. 使用 AI 生成标题和英文标题",
        "operationId": "create_story_api_v1_admin_stories_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_create_story_api_v1_admin_stories_post"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/stories/{story_id}": {
      "get": {
        "tags": [
          "管理后台"
        ],
        "summary": "获取故事详情",
        "description": "获取故事详情（包含字幕）",
        "operationId": "get_story_detail_api_v1_admin_stories__story_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "story_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Story Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "管理后台"
        ],
        "summary": "更新故事信息",
        "description": "更新故事（支持更新缩略图和视频）",
        "operationId": "update_story_api_v1_admin_stories__story_id__put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "story_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Story Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_update_story_api_v1_admin_stories__story_id__put"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "管理后台"
        ],
        "summary": "删除故事",
        "description": "删除故事",
        "operationId": "delete_story_api_v1_admin_stories__story_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "story_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Story Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/stories/{story_id}/publish": {
      "post": {
        "tags": [
          "管理后台"
        ],
        "summary": "发布故事",
        "description": "发布故事",
        "operationId": "publish_story_api_v1_admin_stories__story_id__publish_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "story_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Story Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/stories/{story_id}/unpublish": {
      "post": {
        "tags": [
          "管理后台"
        ],
        "summary": "下架故事",
        "description": "下架故事",
        "operationId": "unpublish_story_api_v1_admin_stories__story_id__unpublish_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "story_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Story Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/upload/thumbnail": {
      "post": {
        "tags": [
          "管理后台"
        ],
        "summary": "上传故事缩略图",
        "description": "上传故事缩略图",
        "operationId": "upload_thumbnail_api_v1_admin_upload_thumbnail_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_upload_thumbnail_api_v1_admin_upload_thumbnail_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/admin/upload/video": {
      "post": {
        "tags": [
          "管理后台"
        ],
        "summary": "上传故事视频",
        "description": "上传故事视频",
        "operationId": "upload_video_api_v1_admin_upload_video_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_upload_video_api_v1_admin_upload_video_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/admin/audiobook/stories": {
      "get": {
        "tags": [
          "管理后台"
        ],
        "summary": "获取有声书故事列表（管理端）",
        "description": "获取有声书故事列表（管理端）",
        "operationId": "list_audiobook_stories_api_v1_admin_audiobook_stories_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 20,
              "title": "Page Size"
            }
          },
          {
            "name": "language",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Language"
            }
          },
          {
            "name": "category",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Category"
            }
          },
          {
            "name": "is_published",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Is Published"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "管理后台"
        ],
        "summary": "创建有声书故事",
        "description": "创建有声书故事",
        "operationId": "create_audiobook_story_api_v1_admin_audiobook_stories_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/Body_create_audiobook_story_api_v1_admin_audiobook_stories_post"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/audiobook/stories/{story_id}": {
      "get": {
        "tags": [
          "管理后台"
        ],
        "summary": "获取有声书故事详情",
        "description": "获取有声书故事详情",
        "operationId": "get_audiobook_story_api_v1_admin_audiobook_stories__story_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "story_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Story Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "管理后台"
        ],
        "summary": "更新有声书故事",
        "description": "更新有声书故事",
        "operationId": "update_audiobook_story_api_v1_admin_audiobook_stories__story_id__put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "story_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Story Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/Body_update_audiobook_story_api_v1_admin_audiobook_stories__story_id__put"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "管理后台"
        ],
        "summary": "删除有声书故事",
        "description": "删除有声书故事",
        "operationId": "delete_audiobook_story_api_v1_admin_audiobook_stories__story_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "story_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Story Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/audiobook/jobs": {
      "get": {
        "tags": [
          "管理后台"
        ],
        "summary": "获取有声书任务列表（管理端）",
        "description": "获取有声书生成任务列表（管理端）",
        "operationId": "list_audiobook_jobs_api_v1_admin_audiobook_jobs_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "default": 20,
              "title": "Page Size"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status"
            }
          },
          {
            "name": "user_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/voice-clone/preset-stories": {
      "get": {
        "tags": [
          "语音克隆"
        ],
        "summary": "获取预设故事列表",
        "description": "获取预设故事列表\n\n返回用于语音克隆测试的预设英文故事。\n每个故事约15秒朗读时长，包含标题和预览文本。\n用户需要朗读这些文本来训练声音克隆模型。\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"stories\": [\n            {\n                \"id\": \"story_little_star\",\n                \"title\": \"Twinkle Little Star\",\n                \"preview_text\": \"Twinkle, twinkle, little star...\",\n                \"estimated_duration\": 15\n            }\n        ]\n    }\n}\n```",
        "operationId": "get_preset_stories_api_v1_voice_clone_preset_stories_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/api/v1/voice-clone/preview": {
      "post": {
        "tags": [
          "语音克隆"
        ],
        "summary": "创建语音克隆预览任务",
        "description": "创建语音克隆预览任务\n\n上传家长的参考音频，系统会克隆音色并用该音色朗读选定的预设故事。\n这是一个异步任务，创建后需要轮询 GET /preview/{task_id} 获取结果。\n\n**音频要求:**\n- 时长：10-15秒\n- 格式：WAV 或 MP3\n- 内容：清晰的语音，无背景噪音\n- 大小：最大10MB\n\n**请求参数:**\n- **audio**: 参考音频文件（multipart/form-data）\n- **story_id**: 预设故事ID\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"task_id\": \"user123_1703980800000\",\n        \"status\": \"processing\",\n        \"message\": \"语音克隆任务已创建，请轮询获取状态\"\n    }\n}\n```",
        "operationId": "create_voice_clone_preview_api_v1_voice_clone_preview_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_create_voice_clone_preview_api_v1_voice_clone_preview_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/voice-clone/preview/{task_id}": {
      "get": {
        "tags": [
          "语音克隆"
        ],
        "summary": "获取语音克隆任务状态",
        "description": "获取语音克隆任务状态\n\n轮询此接口获取任务的处理进度和结果。\n建议轮询间隔：2-3秒。\n\n**路径参数:**\n- **task_id**: 任务ID（从 POST /preview 返回）\n\n**任务状态说明:**\n- **processing**: 处理中，继续轮询\n- **completed**: 完成，audio_url 包含生成的音频\n- **failed**: 失败，error 包含错误信息\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"task_id\": \"user123_1703980800000\",\n        \"status\": \"completed\",\n        \"progress\": 100,\n        \"audio_url\": \"/uploads/voice/user123/preview.mp3\",\n        \"error\": null\n    }\n}\n```",
        "operationId": "get_voice_clone_status_api_v1_voice_clone_preview__task_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/voice-clone/profiles": {
      "get": {
        "tags": [
          "语音克隆"
        ],
        "summary": "获取声音档案列表",
        "description": "获取用户的所有声音档案\n\n返回当前用户保存的所有声音档案列表。\n这些声音可用于故事生成、有声书等功能。\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"profiles\": [\n            {\n                \"id\": \"694534f1c32ffbd6151c18a3\",\n                \"name\": \"爸爸的声音\",\n                \"voice_id\": \"cosyvoice-clone-xxxx\",\n                \"reference_audio_url\": \"/uploads/voice/user123/ref.wav\",\n                \"preview_audio_url\": \"/uploads/voice/user123/preview.mp3\",\n                \"created_at\": \"2025-01-01T12:00:00\"\n            }\n        ],\n        \"total\": 2\n    }\n}\n```",
        "operationId": "get_voice_profiles_api_v1_voice_clone_profiles_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "语音克隆"
        ],
        "summary": "保存声音档案",
        "description": "保存声音档案\n\n语音克隆预览完成且满意后，将克隆的声音保存到声音档案库。\n保存后可在故事生成、有声书等功能中重复使用该声音。\n\n**请求参数:**\n- **task_id**: 已完成的语音克隆任务ID\n- **name**: 声音名称，如：爸爸的声音、妈妈的声音\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"profile\": {\n            \"id\": \"694534f1c32ffbd6151c18a3\",\n            \"name\": \"爸爸的声音\",\n            \"voice_id\": \"cosyvoice-clone-xxxx\",\n            \"reference_audio_url\": \"/uploads/voice/user123/ref.wav\",\n            \"preview_audio_url\": \"/uploads/voice/user123/preview.mp3\",\n            \"created_at\": \"2025-01-01T12:00:00\"\n        }\n    }\n}\n```",
        "operationId": "save_voice_profile_api_v1_voice_clone_profiles_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SaveVoiceProfileRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/voice-clone/profiles/{profile_id}": {
      "get": {
        "tags": [
          "语音克隆"
        ],
        "summary": "获取声音档案详情",
        "description": "获取单个声音档案详情\n\n**路径参数:**\n- **profile_id**: 声音档案ID\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"id\": \"694534f1c32ffbd6151c18a3\",\n        \"name\": \"爸爸的声音\",\n        \"voice_id\": \"cosyvoice-clone-xxxx\",\n        \"reference_audio_url\": \"/uploads/voice/user123/ref.wav\",\n        \"preview_audio_url\": \"/uploads/voice/user123/preview.mp3\",\n        \"created_at\": \"2025-01-01T12:00:00\"\n    }\n}\n```",
        "operationId": "get_voice_profile_api_v1_voice_clone_profiles__profile_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "profile_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Profile Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "语音克隆"
        ],
        "summary": "更新声音档案",
        "description": "更新声音档案名称\n\n**路径参数:**\n- **profile_id**: 声音档案ID\n\n**请求参数:**\n- **name**: 新的声音名称\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"更新成功\",\n    \"data\": null\n}\n```",
        "operationId": "update_voice_profile_api_v1_voice_clone_profiles__profile_id__put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "profile_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Profile Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateVoiceProfileRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "语音克隆"
        ],
        "summary": "删除声音档案",
        "description": "删除声音档案\n\n删除后将无法恢复，且使用该声音的历史记录不受影响。\n\n**路径参数:**\n- **profile_id**: 声音档案ID\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"删除成功\",\n    \"data\": null\n}\n```",
        "operationId": "delete_voice_profile_api_v1_voice_clone_profiles__profile_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "profile_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Profile Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/digital-human/preview": {
      "post": {
        "tags": [
          "数字人"
        ],
        "summary": "创建数字人预览任务",
        "description": "创建数字人预览任务\n\n上传家长的正面照片，系统会使用阿里云 EMO 技术生成动态数字人预览视频。\n这是一个异步任务，创建后需要轮询 GET /preview/{task_id} 获取结果。\n\n**图片要求:**\n- 格式：JPG 或 PNG\n- 内容：清晰的正面人像照片\n- 大小：最大10MB\n\n**音频来源（三选一）:**\n1. **不传音频参数** - 使用系统默认音色生成预览\n2. **上传 audio 文件** - 直接使用上传的音频驱动数字人\n3. **传 voice_profile_id + preview_text** - 使用已保存的克隆声音合成音频\n\n**请求参数:**\n- **image**: 头像照片（multipart/form-data，必填）\n- **audio**: 音频文件（可选，WAV/MP3格式，最大20MB）\n- **voice_profile_id**: 声音档案ID（可选）\n- **preview_text**: 预览文本（使用声音档案时必填）\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"task_id\": \"user123_1703980800000\",\n        \"status\": \"processing\",\n        \"audio_source\": \"default\",\n        \"message\": \"Digital human task created, poll for status\"\n    }\n}\n```",
        "operationId": "create_digital_human_preview_api_v1_digital_human_preview_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_create_digital_human_preview_api_v1_digital_human_preview_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/digital-human/preview/{task_id}": {
      "get": {
        "tags": [
          "数字人"
        ],
        "summary": "获取数字人任务状态",
        "description": "获取数字人任务状态\n\n轮询此接口获取任务的处理进度和结果。\n建议轮询间隔：3-5秒（数字人生成较慢）。\n\n**路径参数:**\n- **task_id**: 任务ID（从 POST /preview 返回）\n\n**任务状态说明:**\n- **detecting**: 图像检测中，检测人脸和关键点\n- **generating**: 视频生成中，EMO 模型处理\n- **completed**: 完成，video_url 包含生成的视频\n- **failed**: 失败，error 包含错误信息\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"task_id\": \"user123_1703980800000\",\n        \"status\": \"completed\",\n        \"progress\": 100,\n        \"video_url\": \"/uploads/avatar/user123/preview.mp4\",\n        \"error\": null\n    }\n}\n```",
        "operationId": "get_digital_human_status_api_v1_digital_human_preview__task_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Task Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/digital-human/profiles": {
      "get": {
        "tags": [
          "数字人"
        ],
        "summary": "获取头像档案列表",
        "description": "获取用户的所有头像档案\n\n返回当前用户保存的所有头像档案列表。\n这些头像可用于故事生成功能。\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"profiles\": [\n            {\n                \"id\": \"694534f1c32ffbd6151c18a4\",\n                \"name\": \"爸爸的头像\",\n                \"image_url\": \"/uploads/avatar/user123/photo.jpg\",\n                \"preview_video_url\": \"/uploads/avatar/user123/preview.mp4\",\n                \"created_at\": \"2025-01-01T12:00:00\"\n            }\n        ],\n        \"total\": 2\n    }\n}\n```",
        "operationId": "get_avatar_profiles_api_v1_digital_human_profiles_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "数字人"
        ],
        "summary": "保存头像档案",
        "description": "保存头像档案\n\n数字人预览完成且满意后，将头像保存到头像档案库。\n保存后可在故事生成功能中重复使用该头像。\n\n**请求参数:**\n- **task_id**: 已完成的数字人任务ID\n- **name**: 头像名称，如：爸爸的头像、妈妈的头像\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"profile\": {\n            \"id\": \"694534f1c32ffbd6151c18a4\",\n            \"name\": \"爸爸的头像\",\n            \"image_url\": \"/uploads/avatar/user123/photo.jpg\",\n            \"preview_video_url\": \"/uploads/avatar/user123/preview.mp4\",\n            \"created_at\": \"2025-01-01T12:00:00\"\n        }\n    }\n}\n```",
        "operationId": "save_avatar_profile_api_v1_digital_human_profiles_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SaveAvatarProfileRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/digital-human/profiles/{profile_id}": {
      "get": {
        "tags": [
          "数字人"
        ],
        "summary": "获取头像档案详情",
        "description": "获取单个头像档案详情\n\n**路径参数:**\n- **profile_id**: 头像档案ID\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"id\": \"694534f1c32ffbd6151c18a4\",\n        \"name\": \"爸爸的头像\",\n        \"image_url\": \"/uploads/avatar/user123/photo.jpg\",\n        \"preview_video_url\": \"/uploads/avatar/user123/preview.mp4\",\n        \"created_at\": \"2025-01-01T12:00:00\"\n    }\n}\n```",
        "operationId": "get_avatar_profile_api_v1_digital_human_profiles__profile_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "profile_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Profile Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "数字人"
        ],
        "summary": "更新头像档案",
        "description": "更新头像档案名称\n\n**路径参数:**\n- **profile_id**: 头像档案ID\n\n**请求参数:**\n- **name**: 新的头像名称\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"更新成功\",\n    \"data\": null\n}\n```",
        "operationId": "update_avatar_profile_api_v1_digital_human_profiles__profile_id__put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "profile_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Profile Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateAvatarProfileRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "数字人"
        ],
        "summary": "删除头像档案",
        "description": "删除头像档案\n\n删除后将无法恢复，且使用该头像的历史记录不受影响。\n\n**路径参数:**\n- **profile_id**: 头像档案ID\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"删除成功\",\n    \"data\": null\n}\n```",
        "operationId": "delete_avatar_profile_api_v1_digital_human_profiles__profile_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "profile_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Profile Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/story-generation/jobs": {
      "post": {
        "tags": [
          "story-generation"
        ],
        "summary": "创建故事生成任务",
        "description": "创建故事生成任务\n\n流程：\n1. 提取视频音频\n2. 分离人声/背景音\n3. 语音识别生成字幕\n4. 生成克隆语音\n5. 生成数字人视频\n6. 合成最终视频\n\n参数：\n- full_video: 默认 False 只生成前2个片段预览，设为 True 生成完整视频",
        "operationId": "create_job_api_v1_story_generation_jobs_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateStoryJobRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "story-generation"
        ],
        "summary": "获取任务列表",
        "description": "获取用户的故事生成任务列表",
        "operationId": "list_jobs_api_v1_story_generation_jobs_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20,
              "title": "Page Size"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/story-generation/jobs/{job_id}": {
      "get": {
        "tags": [
          "story-generation"
        ],
        "summary": "获取任务详情",
        "description": "获取任务详情和进度",
        "operationId": "get_job_api_v1_story_generation_jobs__job_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/story-generation/jobs/{job_id}/subtitles": {
      "get": {
        "tags": [
          "story-generation"
        ],
        "summary": "获取字幕列表",
        "description": "获取任务的字幕列表，用于角色选择",
        "operationId": "get_subtitles_api_v1_story_generation_jobs__job_id__subtitles_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "story-generation"
        ],
        "summary": "更新字幕选择",
        "description": "更新字幕选择（选择要扮演的角色台词）",
        "operationId": "update_subtitle_selection_api_v1_story_generation_jobs__job_id__subtitles_put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateSubtitleSelectionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/audiobook/stories": {
      "get": {
        "tags": [
          "有声书"
        ],
        "summary": "获取有声书故事列表",
        "description": "获取有声书故事列表\n\n返回平台上所有可用的有声书故事模板。\n支持按语言、分类、年龄段进行筛选。\n\n**请求参数:**\n- **page**: 页码，从1开始\n- **page_size**: 每页数量，1-100\n- **language**: 语言筛选（可选）\n- **category**: 分类筛选（可选）\n- **age_group**: 年龄段筛选（可选）\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"items\": [\n            {\n                \"id\": \"695342ec383483bf26139d89\",\n                \"title\": \"三只小猪\",\n                \"title_en\": \"The Three Little Pigs\",\n                \"content\": \"Once upon a time...\",\n                \"language\": \"en\",\n                \"category\": \"fairy_tale\",\n                \"age_group\": \"5-8\",\n                \"estimated_duration\": 180,\n                \"thumbnail_url\": \"/uploads/audiobook/cover.jpg\",\n                \"is_published\": true\n            }\n        ],\n        \"total\": 10,\n        \"page\": 1,\n        \"page_size\": 20\n    }\n}\n```",
        "operationId": "list_stories_api_v1_audiobook_stories_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "页码，从1开始",
              "default": 1,
              "title": "Page"
            },
            "description": "页码，从1开始"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "每页数量，最大100",
              "default": 20,
              "title": "Page Size"
            },
            "description": "每页数量，最大100"
          },
          {
            "name": "language",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "语言筛选：en(英语) | zh(中文)",
              "title": "Language"
            },
            "description": "语言筛选：en(英语) | zh(中文)"
          },
          {
            "name": "category",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "分类筛选：fairy_tale | fable | adventure | bedtime",
              "title": "Category"
            },
            "description": "分类筛选：fairy_tale | fable | adventure | bedtime"
          },
          {
            "name": "age_group",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "年龄段筛选：3-5 | 5-8 | 8-12",
              "title": "Age Group"
            },
            "description": "年龄段筛选：3-5 | 5-8 | 8-12"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/audiobook/stories/{story_id}": {
      "get": {
        "tags": [
          "有声书"
        ],
        "summary": "获取有声书故事详情",
        "description": "获取有声书故事详情\n\n返回故事的完整内容，包括用于 TTS 合成的文本。\n\n**路径参数:**\n- **story_id**: 故事唯一标识ID\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"id\": \"695342ec383483bf26139d89\",\n        \"title\": \"三只小猪\",\n        \"title_en\": \"The Three Little Pigs\",\n        \"content\": \"Once upon a time, there were three little pigs who lived with their mother...\",\n        \"language\": \"en\",\n        \"category\": \"fairy_tale\",\n        \"age_group\": \"5-8\",\n        \"estimated_duration\": 180,\n        \"thumbnail_url\": \"/uploads/audiobook/cover.jpg\",\n        \"background_music_url\": \"/uploads/audiobook/bgm.mp3\",\n        \"is_published\": true,\n        \"created_at\": \"2025-01-01T12:00:00\",\n        \"updated_at\": \"2025-01-01T12:00:00\"\n    }\n}\n```",
        "operationId": "get_story_api_v1_audiobook_stories__story_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "story_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Story Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/audiobook/jobs": {
      "post": {
        "tags": [
          "有声书"
        ],
        "summary": "创建有声书生成任务",
        "description": "创建有声书生成任务\n\n选择一个故事和一个声音档案，系统会使用该声音朗读故事内容，生成个性化有声书。\n这是一个异步任务，创建后需要轮询 GET /jobs/{job_id} 获取结果。\n\n**请求参数:**\n- **story_id**: 有声书故事ID（从故事列表获取）\n- **voice_profile_id**: 声音档案ID（从语音克隆模块获取）\n\n**处理流程:**\n1. 验证故事和声音档案存在\n2. 使用 CosyVoice TTS 合成语音\n3. （可选）与背景音乐混合\n4. 上传最终音频文件\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"id\": \"695345efc32ffbd6151c18a9\",\n        \"user_id\": \"6948bda91fd873cf81f5addd\",\n        \"story_id\": \"695342ec383483bf26139d89\",\n        \"voice_profile_id\": \"694534f1c32ffbd6151c18a3\",\n        \"status\": \"pending\",\n        \"progress\": 0,\n        \"current_step\": \"init\",\n        \"story_title\": \"三只小猪\",\n        \"voice_name\": \"爸爸的声音\",\n        \"created_at\": \"2025-01-01T12:00:00\"\n    }\n}\n```",
        "operationId": "create_job_api_v1_audiobook_jobs_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateAudiobookJobRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "有声书"
        ],
        "summary": "获取有声书任务列表",
        "description": "获取用户的有声书生成任务列表\n\n返回当前用户创建的所有有声书任务，按创建时间倒序排列。\n可用于展示\"我的有声书\"页面。\n\n**请求参数:**\n- **page**: 页码，从1开始\n- **page_size**: 每页数量，1-100\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"items\": [\n            {\n                \"id\": \"695345efc32ffbd6151c18a9\",\n                \"status\": \"completed\",\n                \"progress\": 100,\n                \"audio_url\": \"/uploads/audiobook/user123/output.mp3\",\n                \"duration\": 185,\n                \"story_title\": \"三只小猪\",\n                \"voice_name\": \"爸爸的声音\",\n                \"created_at\": \"2025-01-01T12:00:00\",\n                \"completed_at\": \"2025-01-01T12:03:00\"\n            }\n        ],\n        \"total\": 5,\n        \"page\": 1,\n        \"page_size\": 20\n    }\n}\n```",
        "operationId": "list_jobs_api_v1_audiobook_jobs_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "页码，从1开始",
              "default": 1,
              "title": "Page"
            },
            "description": "页码，从1开始"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "每页数量，最大100",
              "default": 20,
              "title": "Page Size"
            },
            "description": "每页数量，最大100"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/audiobook/jobs/{job_id}": {
      "get": {
        "tags": [
          "有声书"
        ],
        "summary": "获取有声书任务状态",
        "description": "获取有声书任务状态\n\n轮询此接口获取任务的处理进度和结果。\n建议轮询间隔：2-3秒。\n\n**路径参数:**\n- **job_id**: 任务ID（从 POST /jobs 返回）\n\n**任务状态说明:**\n- **pending**: 等待处理\n- **processing**: 处理中\n- **completed**: 完成，audio_url 包含生成的音频\n- **failed**: 失败，error 包含错误信息\n\n**处理步骤说明:**\n- **init**: 初始化任务\n- **tts**: 语音合成中\n- **mixing**: 音频混合中（添加背景音乐）\n- **completed**: 处理完成\n\n**返回示例:**\n```json\n{\n    \"code\": 0,\n    \"message\": \"success\",\n    \"data\": {\n        \"id\": \"695345efc32ffbd6151c18a9\",\n        \"user_id\": \"6948bda91fd873cf81f5addd\",\n        \"story_id\": \"695342ec383483bf26139d89\",\n        \"voice_profile_id\": \"694534f1c32ffbd6151c18a3\",\n        \"status\": \"completed\",\n        \"progress\": 100,\n        \"current_step\": \"completed\",\n        \"audio_url\": \"/uploads/audiobook/user123/output.mp3\",\n        \"duration\": 185,\n        \"story_title\": \"三只小猪\",\n        \"voice_name\": \"爸爸的声音\",\n        \"created_at\": \"2025-01-01T12:00:00\",\n        \"completed_at\": \"2025-01-01T12:03:00\",\n        \"error\": null\n    }\n}\n```",
        "operationId": "get_job_api_v1_audiobook_jobs__job_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/": {
      "get": {
        "summary": "Root",
        "description": "根路径",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "summary": "Health Check",
        "description": "健康检查",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Body_batch_create_stories_api_v1_admin_stories_batch_post": {
        "properties": {
          "videos": {
            "items": {
              "type": "string",
              "format": "binary"
            },
            "type": "array",
            "title": "Videos"
          },
          "category_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Category Id"
          }
        },
        "type": "object",
        "required": [
          "videos"
        ],
        "title": "Body_batch_create_stories_api_v1_admin_stories_batch_post"
      },
      "Body_create_audiobook_story_api_v1_admin_audiobook_stories_post": {
        "properties": {
          "title": {
            "type": "string",
            "title": "Title"
          },
          "title_en": {
            "type": "string",
            "title": "Title En"
          },
          "content": {
            "type": "string",
            "title": "Content"
          },
          "language": {
            "type": "string",
            "title": "Language",
            "default": "en"
          },
          "category": {
            "type": "string",
            "title": "Category",
            "default": "fairy_tale"
          },
          "age_group": {
            "type": "string",
            "title": "Age Group",
            "default": "5-8"
          },
          "thumbnail_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thumbnail Url"
          },
          "background_music_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Background Music Url"
          },
          "is_published": {
            "type": "boolean",
            "title": "Is Published",
            "default": true
          },
          "sort_order": {
            "type": "integer",
            "title": "Sort Order",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "title",
          "title_en",
          "content"
        ],
        "title": "Body_create_audiobook_story_api_v1_admin_audiobook_stories_post"
      },
      "Body_create_digital_human_preview_api_v1_digital_human_preview_post": {
        "properties": {
          "image": {
            "type": "string",
            "format": "binary",
            "title": "Image",
            "description": "头像照片，清晰正面人像，JPG/PNG格式"
          },
          "audio": {
            "anyOf": [
              {
                "type": "string",
                "format": "binary"
              },
              {
                "type": "null"
              }
            ],
            "title": "Audio",
            "description": "音频文件（可选），用于数字人说话"
          },
          "voice_profile_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Voice Profile Id",
            "description": "已保存的声音档案ID（可选）"
          },
          "preview_text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Preview Text",
            "description": "预览文本，使用声音档案时需要提供"
          }
        },
        "type": "object",
        "required": [
          "image"
        ],
        "title": "Body_create_digital_human_preview_api_v1_digital_human_preview_post"
      },
      "Body_create_story_api_v1_admin_stories_post": {
        "properties": {
          "video": {
            "type": "string",
            "format": "binary",
            "title": "Video"
          },
          "category_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Category Id"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "api_key": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Api Key"
          }
        },
        "type": "object",
        "required": [
          "video"
        ],
        "title": "Body_create_story_api_v1_admin_stories_post"
      },
      "Body_create_voice_clone_preview_api_v1_voice_clone_preview_post": {
        "properties": {
          "audio": {
            "type": "string",
            "format": "binary",
            "title": "Audio",
            "description": "参考音频文件，10-15秒清晰语音，WAV/MP3格式"
          },
          "story_id": {
            "type": "string",
            "title": "Story Id",
            "description": "预设故事ID，从 /preset-stories 获取"
          }
        },
        "type": "object",
        "required": [
          "audio",
          "story_id"
        ],
        "title": "Body_create_voice_clone_preview_api_v1_voice_clone_preview_post"
      },
      "Body_update_audiobook_story_api_v1_admin_audiobook_stories__story_id__put": {
        "properties": {
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          },
          "title_en": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title En"
          },
          "content": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content"
          },
          "language": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Language"
          },
          "category": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Category"
          },
          "age_group": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Age Group"
          },
          "thumbnail_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thumbnail Url"
          },
          "background_music_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Background Music Url"
          },
          "is_published": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Published"
          },
          "sort_order": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sort Order"
          }
        },
        "type": "object",
        "title": "Body_update_audiobook_story_api_v1_admin_audiobook_stories__story_id__put"
      },
      "Body_update_story_api_v1_admin_stories__story_id__put": {
        "properties": {
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "category_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Category Id"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status"
          },
          "thumbnail": {
            "anyOf": [
              {
                "type": "string",
                "format": "binary"
              },
              {
                "type": "null"
              }
            ],
            "title": "Thumbnail"
          },
          "video": {
            "anyOf": [
              {
                "type": "string",
                "format": "binary"
              },
              {
                "type": "null"
              }
            ],
            "title": "Video"
          }
        },
        "type": "object",
        "title": "Body_update_story_api_v1_admin_stories__story_id__put"
      },
      "Body_upload_avatar_api_v1_user_avatar_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File",
            "description": "头像图片文件，支持 JPG/PNG/GIF/WebP 格式"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_upload_avatar_api_v1_user_avatar_post"
      },
      "Body_upload_thumbnail_api_v1_admin_upload_thumbnail_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_upload_thumbnail_api_v1_admin_upload_thumbnail_post"
      },
      "Body_upload_video_api_v1_admin_upload_video_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_upload_video_api_v1_admin_upload_video_post"
      },
      "CategoryCreate": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "title": "Name",
            "description": "分类中文名称",
            "example": "童话故事"
          },
          "name_en": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "title": "Name En",
            "description": "分类英文名称",
            "example": "Fairy Tales"
          },
          "sort_order": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Sort Order",
            "description": "排序序号，数字越小越靠前",
            "default": 0,
            "example": 0
          }
        },
        "type": "object",
        "required": [
          "name",
          "name_en"
        ],
        "title": "CategoryCreate",
        "description": "创建分类请求\n\n用于管理员创建新的故事分类。",
        "example": {
          "name": "童话故事",
          "name_en": "Fairy Tales",
          "sort_order": 0
        }
      },
      "ChangePasswordRequest": {
        "properties": {
          "old_password": {
            "type": "string",
            "minLength": 1,
            "title": "Old Password",
            "description": "当前密码",
            "example": "OldPassword123"
          },
          "new_password": {
            "type": "string",
            "maxLength": 128,
            "minLength": 8,
            "title": "New Password",
            "description": "新密码，至少8位，必须包含大小写字母和数字",
            "example": "NewPassword456"
          }
        },
        "type": "object",
        "required": [
          "old_password",
          "new_password"
        ],
        "title": "ChangePasswordRequest",
        "description": "修改密码请求\n\n用户修改自己的登录密码。\n需要提供旧密码进行验证，新密码需要满足强度要求。",
        "example": {
          "new_password": "NewPassword456",
          "old_password": "OldPassword123"
        }
      },
      "CreateAudiobookJobRequest": {
        "properties": {
          "story_id": {
            "type": "string",
            "title": "Story Id",
            "description": "有声书故事ID",
            "example": "695342ec383483bf26139d89"
          },
          "voice_profile_id": {
            "type": "string",
            "title": "Voice Profile Id",
            "description": "声音档案ID，从语音克隆模块获取",
            "example": "694534f1c32ffbd6151c18a3"
          }
        },
        "type": "object",
        "required": [
          "story_id",
          "voice_profile_id"
        ],
        "title": "CreateAudiobookJobRequest",
        "description": "创建有声书生成任务请求\n\n用户选择故事和声音档案，创建有声书生成任务。",
        "example": {
          "story_id": "695342ec383483bf26139d89",
          "voice_profile_id": "694534f1c32ffbd6151c18a3"
        }
      },
      "CreateStoryJobRequest": {
        "properties": {
          "story_id": {
            "type": "string",
            "title": "Story Id",
            "description": "故事 ID"
          },
          "voice_profile_id": {
            "type": "string",
            "title": "Voice Profile Id",
            "description": "声音档案 ID"
          },
          "avatar_profile_id": {
            "type": "string",
            "title": "Avatar Profile Id",
            "description": "头像档案 ID"
          },
          "replace_all_voice": {
            "type": "boolean",
            "title": "Replace All Voice",
            "description": "是否替换全部人声",
            "default": true
          },
          "full_video": {
            "type": "boolean",
            "title": "Full Video",
            "description": "是否生成完整视频，默认只生成前2个片段",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "story_id",
          "voice_profile_id",
          "avatar_profile_id"
        ],
        "title": "CreateStoryJobRequest",
        "description": "创建故事生成任务请求"
      },
      "GoogleAuthRequest": {
        "properties": {
          "code": {
            "type": "string",
            "title": "Code",
            "description": "Google OAuth 授权码",
            "example": "4/0AX4XfWh..."
          }
        },
        "type": "object",
        "required": [
          "code"
        ],
        "title": "GoogleAuthRequest",
        "description": "Google OAuth 认证请求\n\n使用 Google 授权码进行登录或注册。\n授权码从 Google OAuth 回调中获取。"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "LoginRequest": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "注册时使用的邮箱地址",
            "example": "user@example.com"
          },
          "password": {
            "type": "string",
            "maxLength": 128,
            "minLength": 1,
            "title": "Password",
            "description": "用户密码",
            "example": "MyPassword123"
          }
        },
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "title": "LoginRequest",
        "description": "用户登录请求\n\n使用邮箱和密码进行登录认证。\n登录成功后返回访问令牌和刷新令牌。",
        "example": {
          "email": "user@example.com",
          "password": "MyPassword123"
        }
      },
      "RefreshTokenRequest": {
        "properties": {
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token",
            "description": "之前获取的刷新令牌",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          }
        },
        "type": "object",
        "required": [
          "refresh_token"
        ],
        "title": "RefreshTokenRequest",
        "description": "刷新令牌请求\n\n使用刷新令牌获取新的访问令牌。\n当访问令牌过期时调用此接口。"
      },
      "RegisterRequest": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "用户邮箱地址，用于登录和接收通知",
            "example": "user@example.com"
          },
          "password": {
            "type": "string",
            "maxLength": 128,
            "minLength": 8,
            "title": "Password",
            "description": "登录密码，至少8位，必须包含大小写字母和数字",
            "example": "MyPassword123"
          },
          "nickname": {
            "type": "string",
            "maxLength": 50,
            "minLength": 2,
            "title": "Nickname",
            "description": "用户昵称，2-50个字符，支持中文、字母、数字和下划线",
            "example": "小明"
          }
        },
        "type": "object",
        "required": [
          "email",
          "password",
          "nickname"
        ],
        "title": "RegisterRequest",
        "description": "用户注册请求\n\n用于新用户注册账号，需要提供邮箱、密码和昵称。\n密码必须包含大小写字母和数字，长度8-128位。",
        "example": {
          "email": "user@example.com",
          "nickname": "小明",
          "password": "MyPassword123"
        }
      },
      "SaveAvatarProfileRequest": {
        "properties": {
          "task_id": {
            "type": "string",
            "title": "Task Id",
            "description": "已完成的数字人预览任务ID",
            "example": "user123_1703980800000"
          },
          "name": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "title": "Name",
            "description": "头像名称，便于识别，如：爸爸的头像、妈妈的头像",
            "example": "爸爸的头像"
          }
        },
        "type": "object",
        "required": [
          "task_id",
          "name"
        ],
        "title": "SaveAvatarProfileRequest",
        "description": "保存头像档案请求\n\n数字人预览成功后，将头像保存为档案。\n保存后可在故事生成功能中重复使用。",
        "example": {
          "name": "爸爸的头像",
          "task_id": "user123_1703980800000"
        }
      },
      "SaveVoiceProfileRequest": {
        "properties": {
          "task_id": {
            "type": "string",
            "title": "Task Id",
            "description": "已完成的语音克隆任务ID",
            "example": "user123_1703980800000"
          },
          "name": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "title": "Name",
            "description": "声音名称，便于识别，如：爸爸的声音、妈妈的声音",
            "example": "爸爸的声音"
          }
        },
        "type": "object",
        "required": [
          "task_id",
          "name"
        ],
        "title": "SaveVoiceProfileRequest",
        "description": "保存声音档案请求\n\n语音克隆预览成功后，将克隆的声音保存为档案。\n保存后可在故事生成、有声书等功能中重复使用。",
        "example": {
          "name": "爸爸的声音",
          "task_id": "user123_1703980800000"
        }
      },
      "UpdateAvatarProfileRequest": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "title": "Name",
            "description": "新的头像名称",
            "example": "妈妈的头像"
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "UpdateAvatarProfileRequest",
        "description": "更新头像档案请求\n\n用于修改头像档案的名称。",
        "example": {
          "name": "妈妈的头像"
        }
      },
      "UpdateProfileRequest": {
        "properties": {
          "nickname": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50,
                "minLength": 2
              },
              {
                "type": "null"
              }
            ],
            "title": "Nickname",
            "description": "新昵称，2-50个字符，支持中文、字母、数字和下划线",
            "example": "新昵称"
          }
        },
        "type": "object",
        "title": "UpdateProfileRequest",
        "description": "更新用户资料请求\n\n用于修改用户的个人信息，如昵称等。\n所有字段都是可选的，只更新提供的字段。",
        "example": {
          "nickname": "新昵称"
        }
      },
      "UpdateSubtitleSelectionRequest": {
        "properties": {
          "selected_indices": {
            "items": {
              "type": "integer"
            },
            "type": "array",
            "title": "Selected Indices",
            "description": "选中的字幕序号列表"
          }
        },
        "type": "object",
        "required": [
          "selected_indices"
        ],
        "title": "UpdateSubtitleSelectionRequest",
        "description": "更新字幕选择（选择要扮演的角色）"
      },
      "UpdateVoiceProfileRequest": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "title": "Name",
            "description": "新的声音名称",
            "example": "妈妈的声音"
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "UpdateVoiceProfileRequest",
        "description": "更新声音档案请求\n\n用于修改声音档案的名称。",
        "example": {
          "name": "妈妈的声音"
        }
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    },
    "securitySchemes": {
      "HTTPBearer": {
        "type": "http",
        "scheme": "bearer"
      }
    }
  }
}